<body [style.backgroundImage]="backgroundImage">
  <div class="verify-email-container">
    <h2 class="text-center">Email Confirmation</h2>
    <p class="text-center">Please enter the 6-digit code sent to your email:</p>
  
    <form (ngSubmit)="onSubmit()" #icodeForm="ngForm" class="icode-form">
      <div class="form-group">
        <label for="icode" class="form-label">Confirmation Code</label>
        <input
          type="text"
          id="icode"
          name="icode"
          class="form-control"
          maxlength="6"
          minlength="6"
          required
          pattern="[0-9]*"
          [(ngModel)]="icode"
          #icodeInput="ngModel"
        />
        <div class="invalid-feedback" *ngIf="icodeInput.invalid && icodeInput.touched">
          <p *ngIf="icodeInput.errors?.['required']">Code is required.</p>
          <p *ngIf="icodeInput.errors?.['minlength'] || icodeInput.errors?.['maxlength']">
            Code must be exactly 6 digits.
          </p>
          <p *ngIf="icodeInput.errors?.['pattern']">Code must contain only numbers.</p>
        </div>
      </div>
  
      <button
        type="submit"
        class="btn btn-primary w-100 mt-3"
        [disabled]="icodeForm.invalid"
      >
        Confirm
      </button>
    </form>

    <!-- Resend button with timer -->
    <div class="mt-3 text-center">
      <span
        (click)="onResendCode()"
        [ngClass]="{ 'text-muted': isResendDisabled, 'text-succes': !isResendDisabled }"
        [style.cursor]="isResendDisabled ? 'not-allowed' : 'pointer'"
        style="font-weight: bold; font-size: 0.9rem;"
      >
        Resend Code
      </span>
      <p *ngIf="isResendDisabled" class="mt-2 text-muted">
        Resend available in {{ timer }} seconds.
      </p>
    </div>
    
  </div>
</body>
